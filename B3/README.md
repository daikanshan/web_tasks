# 后端B3任务
----

B3任务要求大家学会安装Rails，并通过脚手架工具建立项目框架，搭建一个小型的博客。

本次任务是暑期的最后一次任务。该任务的评分会有相当的权重，希望各位能尽自己全力。

## 任务要求
1. 阅读Ruby on Rails指南，并按照书上的示例自己做一些训练。 看到第14章就差不多了，后面的以后慢慢看（大约3天）。
2. 程序包含一个前台和后台，前台是给网站的访问者查看的，后台是给网站管理员使用的。
3. 前台系统中，要为用户提供查看文章、留言、按月份和分类查看文章、意见反馈等功能
4. 后台系统中，包含一个用户登录系统，登录之后，有文章管理、留言管理、意见反馈管理三大板块；（账户的管理暂时不需要）。
5. 所有留言在提交后都要由管理员在后台审核，审核通过后才会出现在前台
6. 你需要自己设计数据库的表结构，应当包含文章表(posts)、留言表(comments)、反馈表(feedbacks)、管理员账户表(admins)。posts表中必须包含管理员id，comments表必须包含文章id
7. 后台系统中，除登录页面外，其他页面都必须在执行前检查用户是否登录，如果不是则需要跳转到登录页。
8. 其他要求可以根据你自己对于页面和博客程序的理解，尽可能的发挥。


## 检查点
1. 数据库表结构清晰合理，符合Rails的数据库建表惯例。需要使用Migrates自动建立表结构。查询频繁的字段需要加上索引
2. 后台登录系统功能正常，可以提供错误提示以及登录错误次数过多时的账户锁定功能（10分钟内不能再登录）
3. 可以方便的对文章进行管理(CURD), 另外，文章的内容需要支持富文本编辑。可以使用rails_kindeditor插件
4. 文章的封面需要单独建立字段上传，并需要裁减到合适的大小
5. 可以对留言进行管理，并审核留言
6. 意见反馈提供查看功能即可
7. 前台系统可以正常查看文章列表，侧边栏工作正常
8. 留言功能正常，需要有错误提示（姓名, Email必填，Email必须符合格式要求。需要使用ActiveRecord内置的validates方法验证）
9. 意见反馈功能正常


## 加分项
1. 提供分页功能（文章分页、留言分页、后台系统中各个列表的分页）
2. 提供搜索功能
3. 会检查提交的内容中有没有包含html内容（用户留言和反馈），用户只能提交纯文本内容，如果出现html也需要转义
4. 账户密码会通过hash后再存储到数据库

## 任务期限
本次任务需要分阶段完成。
阶段1 ： 数据库表设计完后，需要用 【邮件】 把表结构发给我，通过以后可以进一步操作。截止：8月17日
阶段2 ： 后台系统设计完以后，验收一次，通过以后可以继续开发。截止：阶段1验收完成后7天
阶段3 ： 全部完成后，总验收一次。 截止：阶段2完成后7天

## 资源以及提示

### Ruby on Rails相关资料
Ruby On Rails 指南： http://guides.ruby-china.org/

Gems插件列表： https://ruby-china.org/wiki/gems

RubyGems镜像： http://ruby.taobao.org/

Rails风格指导： https://ruby-china.org/wiki/rails-stye-guide， 尽可能遵循这个指导来安排你的代码

更多Rails相关资料可以查看ruby-china的wiki: https://ruby-china.org/wiki

### 模板

模板会在几天内给出，你也可以使用其他模板，但功能不能有缺失。
